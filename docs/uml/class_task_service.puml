@startuml

package app {

  package main {
    class MainApp {
      +FastAPI instance
      +include_router()
    }
  }

  package routers {
    class TaskRouter <<module>> {
      +@router.post("/tasks/")
    }
  }

  package services {
    class TaskService {
      +create_task()
    }
  }

  package schemas {
    class TaskCreate {
      +title: str
      +description: str
      +done: bool
    }

    class Task {
      +id: UUID
      +title: str
      +description: str
      +done: bool
    }

    class TaskResponse {
      +message: str
      +task: Task
    }
  }

  package db.models {
    class TaskModel {
      +id: UUID
      +title: str
      +description: str
      +done: bool
    }
  }
}

' 依存関係
MainApp --> TaskRouter : include_router()
TaskRouter --> TaskService : uses
TaskService --> TaskModel : ORM操作
TaskService --> TaskCreate : 入力DTO
TaskService --> Task : 出力DTO
TaskService --> TaskResponse : return
TaskResponse --> Task : has-a
Task --> TaskModel : from_orm()

@enduml
